<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Social media and brand marketing in the hotel industry</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h1>Social media and brand marketing in the hotel industry</h1>

<p>*** Note: the following is a mix of intro and (uncommented) code dump.  Will refine significantly and remove most code to supporting files.  Please feel free to comment where there is a simpler way to code - I&#39;m hitting on some more elegant ways of working with tm as I read through example case studies, but I haven&#39;t been able to revamp code yet.  </p>

<p>Brands are increasingly looking to build a deeper engagement with their customers and view social media an opportunity to create ongoing conversations about the brand, its products, and the customers&#39; needs and wants.  Some brand conversations are initiated by customers, usually revolving around customer service or reviews.  Other conversations are initiated by brand marketing organziations and try to drum up buzz around existing marketing programs or new campaigns developed specifically for social channels.  This study will examine this second kind of conversation and attempt to understand the effectiveness of brand led campaigns at generating this buzz and fostering genuine customer response.  </p>

<p>In this study, we will look at how the top brands in the hotel industry are using Twitter and attempt to measure the customer response.  In the case that brands are pushing marketing-specific hashtags or initiating campaigns, we will quantify who is using these hashtags and attempt to derive sentiment.  In parallel, we will also gather Twitter data for all references to a few selected brands (not just promotional hashtags) and again attempt to quantify who is driving the conversations (brands, hotels, or customers), which conversations gain traction, and derive overall sentiment. </p>

<h3>Outline of technical contributions</h3>

<p>The primary technical exercise of this study is in obtaining, shaping, and visualizing Twitter data.  As time allows, there will be some additional testing of natural language toolkits for text sentiment analysis. </p>

<p>Several steps will be documented in this paper: </p>

<ul>
<li>Python script developed to request tweets from the Twitter Streaming API which contain several selected hotel keywords and promotional hashtags.</li>
<li>Script set to run continuously on an AWS EC2 micro instance, generating ~500MB / week for the two weeks between April 20 and May 3, 2014.</li>
<li>Python script extracted a subset of fields from the captured tweets according to the documentation provided by Twitter. Fields include user, text, time of tweet, retweet status, and any included hashtags for any captured English language tweets.</li>
<li>The resulting data frame was exported to a csv for loading in R and Tableau Public for further visualization and processing. These tools were selected to further my own personal goals for tool learning.  Note: for future work, I would explore the streamR package in R to read the streaming API directly into R.<br/></li>
<li>For text processing, the tm package was used to remove punctuation and stem words in the tweet text column and create a term document matrix for further analysis.</li>
<li>For sentiment analysis, a method similar to that of Jeffrey Breen was (will be used): <a href="http://www.inside-r.org/howto/mining-twitter-airline-consumer-sentiment">http://www.inside-r.org/howto/mining-twitter-airline-consumer-sentiment</a>. Namely, a corpus of positive and negative words was downloaded and a simplified &ldquo;Bayesian&rdquo; method was used to determine sentiment of each tweet (count of positive words minus count of negative).  As time allows, I will also experiment with the R wordcloud package to visualize differences between brands.</li>
</ul>

<h3>Outline of business contributions</h3>

<p>This analysis focuses on three competitors - Marriott, Hilton, and Starwood.  Marriott and Hilton are the most similar in terms of number and breadth of properties, but Starwood is also recognized as a key player in upper upscale, luxury, lifestyle, and loyalty.  Tweet handles followed in this test correspond to selected full service and luxury hotels as well as chain loyalty programs.  Specifically the following terms (and related handles) were followed: (***Note: need to be exhaustive here!)</p>

<ul>
<li>Marriott International, Marriott, Renaissance, Marriott Rewards </li>
<li>Hilton Worldwide, Hilton, Hilton HHonors </li>
<li>Starwood, Sheraton, Westin, W, SPG</li>
</ul>

<p>There are two sets of questions to answer:</p>

<p>1) What kinds of engagement is each brand driving?  Are there detectable classes of tweets - giveaways, thought starters, pure branding messages, responses to consumer tweets about the brand, etc?  Which tweets are being retweeted and which hashtags are being reused by consumers?  </p>

<p>2) Do brands have meaningfully differentiable brand characters?  Are they using certain words or types of tweets to engage?  Is there a detectable difference in tone between the brands either in the tweets generated by the corporate entities or in the consumer tweets related to the brand?</p>

<p>An interesting application would be to we generate monitoring to detect new promotional hashtags or changes in tweet strategy over time.  The current two week test is insufficient, but a repeatable analysis pattern could be implemented to undertake this monitoring.</p>

<h2>Step 1: Getting data from Twitter and into R</h2>

<p>Two Python scripts are documented in the companion Python files.  One script (holly_gathering_hotel_tweets.py) ran continuously for multiple weeks on an Amazon EC2 server to collect tweets containing a selected set of hotel brand keywords.  The other script (holly_processing_hotel_tweets_for_R.py) extracted the relevant fields from the saved output file into a pandas dataframe and then wrote the dataframe out to a csv for loading in R and Tableau.  </p>

<p>Notably, only tweets tagged as English language were processed and the timestamp, user screen name, tweet text, hashtags, and retweet and favorited counts were retained.  An additional processing step linked each tweet with at least one of the original search terms that resulted in this tweet being captured by the filter request to the streaming API.  </p>

<p>***Note: would also document interesting bits about the Twitter streaming API including setting up Oauth and using documentation to extract relevant fields from the JSON/dict.  </p>

<h2>Step 2: Processing data in R</h2>

<p>First read in data and clean up a few NAs (seem to occur only in lines where &ldquo;retweets&rdquo; is also NA).</p>

<pre><code class="r">setwd(&quot;~/Desktop/programming/Python/twitter&quot;)
data = read.csv(&quot;csvout.csv&quot;, encoding = &quot;utf-8&quot;)

sum(is.na(data))
</code></pre>

<pre><code>## [1] 123
</code></pre>

<pre><code class="r">sum(is.na(data[, 3]))
</code></pre>

<pre><code>## [1] 41
</code></pre>

<pre><code class="r">data &lt;- data[!is.na(data[, 3]), ]  # seems to get them all
sum(is.na(data))
</code></pre>

<pre><code>## [1] 0
</code></pre>

<pre><code class="r"># ideally need to keep checking if more to remove
</code></pre>

<p>Create a couple of helper functions - note: this may be more efficient with tm - need to take a more rigorous look.</p>

<pre><code class="r"># HELPER FUNCTIONS
# ---------------------------------------------------------------
unique_list &lt;- function(word_list) {
    long_string &lt;- &quot;&quot;
    for (line in word_list) {
        t = strsplit(line, &quot; &quot;)[[1]]
        long_string = c(long_string, t)
    }
    return(unique(long_string))
}

count_terms &lt;- function(term, word_list) {
    term_count &lt;- length(grep(term, word_list))
    return(term_count)
}
</code></pre>

<p>Data cleanup reveals a couple interesting things that do not mean what I think they mean.  Notably, both Paris and Perez Hilton amplify the Hilton hits, and SPG apparently has a meaning in the Phillipines that has nothing to do with Starwood Preferred Guest.  It&#39;s easy to remove Paris and Perez, SPG is tougher.  </p>

<pre><code class="r"># SOME ADDTL DATA CLEANUP
full_data &lt;- data  # save full data first

count_terms(&quot;paris&quot;, data$text)
</code></pre>

<pre><code>## [1] 40896
</code></pre>

<pre><code class="r">count_terms(&quot;paris hilton&quot;, data$text)
</code></pre>

<pre><code>## [1] 40144
</code></pre>

<pre><code class="r">count_terms(&quot;perez&quot;, data$text)
</code></pre>

<pre><code>## [1] 3857
</code></pre>

<pre><code class="r">count_terms(&quot;perez hilton&quot;, data$text)
</code></pre>

<pre><code>## [1] 3720
</code></pre>

<pre><code class="r">
data &lt;- data[-grep(&quot;paris hilton&quot;, data$text), ]
data &lt;- data[-grep(&quot;perez hilton&quot;, data$text), ]
</code></pre>

<h2>Step 3: First level of analysis - counts and visualizations</h2>

<p>***Note: expect to do some R and Tableau visualizations here.  Need to learn Tableau for work, but need to get back over to my Windows login to load Tableau Public for the purposes of this class.  Will toss in some R base plotting to check that box too.</p>

<pre><code class="r"># WHICH SEARCH TERMS DROVE THE MOST TWEET
# CAPTURES?-----------------------------
search_terms = unique_list(data$terms)
count_list &lt;- sapply(search_terms, count_terms, word_list = data$terms)
search_terms_df &lt;- data.frame(search_terms, count_list)
print(head(search_terms_df[order(search_terms_df$count_list, decreasing = T), 
    ], 25))
</code></pre>

<pre><code>##                          search_terms count_list
##                                           119460
## hilton                         hilton      53049
## marriott                     marriott      33471
## westin                         westin      11235
## spg                               spg       9339
## hiltonhotels             hiltonhotels       4115
## starwood                     starwood       3711
## holidayinn                 holidayinn       2328
## hyatttweets               hyatttweets       1482
## marriottintl             marriottintl       1099
## crowneplaza               crowneplaza        917
## whotels                       whotels        889
## starwoodbuzz             starwoodbuzz        785
## renhotels                   renhotels        753
## hiltonhhonors           hiltonhhonors        683
## sheratonhotels         sheratonhotels        666
## hiltonworldwide       hiltonworldwide        553
## #travelbrilliantly #travelbrilliantly        499
## ihgrewardsclub         ihgrewardsclub        342
## #spglife                     #spglife        276
## hotelindigo               hotelindigo        246
## #beaweekender           #beaweekender         96
## #gotmysweaton           #gotmysweaton         12
## #rdiscover                 #rdiscover          7
## #discoverihg             #discoverihg          6
</code></pre>

<pre><code class="r">
# WHO TWEETS THE
# MOST?--------------------------------------------------------
print(head(summary(data$user), 25))
</code></pre>

<pre><code>##     hotelscenes    vegas_visits  travelpointers       hotelsyes 
##            1462             628             595             222 
##   dreamytravels hiltonhotelfans    ehadshorosos      ehadsmusic 
##             206             204             170             170 
##       ehadstech      alyson9082         ihgcare       ehadsfood 
##             170             167             167             163 
##     ehadsbeauty     ehadsgossip     ehadshealth          cgjase 
##             162             162             162             158 
##  eopublications    travelair283 letsfindyouajob  topratedhotels 
##             145             131             113             107 
## neworleans_buzz   middleeastjob warshingtonpost  bestofabudhabi 
##             102              97              96              94 
##         dc_buzz 
##              92
</code></pre>

<pre><code class="r">
# WHICH TWEETS WERE RETWEETED?----------------------------------------------
# NOTE: Twitter retweeted flag did not work - because part of streaming API,
# future retweets not available at time of capture!
print(head(summary(data$text), 25))
</code></pre>

<pre><code>##                                                      rt @foxtramedia: doubletree by hilton hotel tarrytown http://t.co/azcyygpk1x #hotel #travel 
##                                                                                                                                              568 
##                                                                         rt @foxtramedia: the westin resort http://t.co/jvcmuiz3sv #hotel #travel 
##                                                                                                                                              494 
##               rt @thegooglefactz: best places to go for free wifi; mcdonalds  apple store  panera  office depot  courtyard marriott and staples. 
##                                                                                                                                              394 
##       rt @okeybakassi_: pounded yam -n8000\nsoup- n6000\n\nwait! this transcop hilton people want me to chew the pounded yam alone without soup? 
##                                                                                                                                              280 
##   rt @colts: t.y. hilton on reggie wayne&#39;s return in 2014: “he’s going to shock the world.&quot;\n\nread: http://t.co/7uyynmbdry http://t.co/vxoiv6p… 
##                                                                                                                                              226 
##     rt @werengland: competition: win two vip tickets to the marriott london sevens! follow us and rt for a chance to win this incredible day ou… 
##                                                                                                                                              211 
##     rt @obyezeks: will you come join us today @3pm at the unity fountain opposite hilton and. say &quot; #bringbackourgirls &quot; now and alive ? don&#39;t … 
##                                                                                                                                              205 
##                                             rt @ok_magazine win @godzillamovieuk premiere tickets and overnight marriott hotel stay #okgodzilla. 
##                                                                                                                                              170 
##     rt @anilkapurk: #damaadgate why robber vadra given spg security while the home ministry refuses to give to modi -under real threat? http://… 
##                                                                                                                                              162 
##           rt @washingtonpost: marriott just opened a $520m hotel with 1 175 rooms in downtown d.c. http://t.co/wrxgupmyzx http://t.co/aoaks13tnx 
##                                                                                                                                              156 
##     rt @obyezeks: men who wish to join women&#39;s #bringbackourgirls march tomorrow are of course welcome. 3pm @ unity fountain  near transcorp hi… 
##                                                                                                                                              151 
##                rt @zackstieber: the view from marriott in tupelo  mississippi after a tornado hit. #mswx (via rhthornton) http://t.co/vskdfyla7t 
##                                                                                                                                              109 
##                                                                       rt @66m: just posted a photo @ the westin  langkawi http://t.co/5cjt6yqsi6 
##                                                                                                                                              106 
##                                                                                                      rt @bartbordelon: this westin is very nice! 
##                                                                                                                                              106 
##     rt @wunderground: rt @zackstieber: the view from marriott in tupelo  mississippi after a tornado hit. #mswx (via rhthornton) http://t.co/tx… 
##                                                                                                                                              103 
##     rt @obyezeks: women  ladies and girls  see you tomorrow @ the unity fountain near the hilton where the march for #bringbackourgirls takes o… 
##                                                                                                                                               93 
##          rt @wowfactz: best places to go for free wifi; mcdonalds  starbucks  apple store  panera  office depot  courtyard marriott and staples. 
##                                                                                                                                               88 
##     rt @frank_underwood: #whcd2014 fun fact: the metro stop nearest the washington hilton is at dupont circle. hoping certain reporters will ta… 
##                                                                                                                                               85 
##     rt @bumidinasti88: water slide at the atlantis resort - paradise island  bahamas. #holiday #vacation #travelblogger #travelbrilliantly http… 
##                                                                                                                                               80 
##                              rt @hiltonhotels: retweet if you wish you could be here this weekend! http://t.co/ujmlkdg9an http://t.co/vwkmtkdhgd 
##                                                                                                                                               80 
##                                        rt @mick1878: who&#39;s up for camping outside the hilton next week to keep the everton players up all night? 
##                                                                                                                                               76 
##                                                                                                      i just checked in @holidayinn with #mplaces 
##                                                                                                                                               75 
##         rt @anilkapurk: et not kejriwal exposed dlf vadra nexus in hilton hotel case http://t.co/fg6h9dqwyu … #damaadgate http://t.co/zlkkcbiiao 
##                                                                                                                                               73 
##                                                                           rt @bomani_jones: i didn’t know hilton armstrong was allowed to shoot. 
##                                                                                                                                               69 
## rt @natashacsip: ☯gain followers\n☯rt this\n☯must follow me i follow back\n☯follow everyone who rts\n☯gain\n  #iphone #sougofollow #android ?spg 
##                                                                                                                                               67
</code></pre>

<pre><code># Cleanup and tm - this starts to take a long time!
library(tm)
datacorp &lt;- Corpus(DataframeSource(data.frame(data$text)))
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, tolower)
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, removeWords, stopwords(&quot;english&quot;))
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, removePunctuation)
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, stemDocument)
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, removeNumbers)
print(datacorp[[1]])
datacorp &lt;- tm_map(datacorp, stripWhitespace)
print(datacorp[[1]])

# create a term document matrix
tdm &lt;- TermDocumentMatrix(datacorp)

</code></pre>

<h2>Step 4: Deeper level of analysis - deriving sentiment and finding clusters</h2>

</body>

</html>

